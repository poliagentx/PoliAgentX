{% extends "base.html" %}
{% load static %}
{% block content %}

<style>
 
    .glass-card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(139, 69, 255, 0.1);
    }
    
    .simulation-card {
        background: linear-gradient(145deg, 
            rgba(255, 255, 255, 0.95) 0%, 
            rgba(249, 250, 251, 0.95) 100%);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(139, 69, 255, 0.15);
        box-shadow: 0 8px 32px rgba(139, 69, 255, 0.1);
    }
    
    .input-glow:focus {
        box-shadow: 0 0 0 3px rgba(139, 69, 255, 0.1);
    }
    
    .btn-primary {
        background: linear-gradient(135deg, 
            #8B45FF 0%, 
            #6366F1 50%, 
            #A78BFA 100%);
        transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(139, 69, 255, 0.3);
    }
    
    .stats-grid {
        background: linear-gradient(145deg, 
            rgba(255, 255, 255, 0.8) 0%, 
            rgba(248, 250, 252, 0.8) 100%);
    }
    
    
    
    .fade-out {
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
    }
    
    .fade-in {
        opacity: 1;
        transition: opacity 0.5s ease-in-out;
    }
    
 
    

    .fade-out {
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
    }
    
    .fade-in {
        opacity: 1;
        transition: opacity 0.5s ease-in-out;
    }
</style>

<div class="bg-[#fffbefff] min-h-screen py-6 sm:py-8 px-4 sm:px-6 lg:px-8 rounded-xl backdrop:blur-xl">

    <div class="mx-auto">
        <!-- Header Section -->
        <div class="text-center mb-12">
             <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-r from-[#e2b332ff]/40 to-[#e2b332ff]/40 mb-6">
                <svg class="w-8 h-8 " fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                </svg>
            </div>
            <h1 class="text-5xl font-bold bg-[#e2b332ff] bg-clip-text text-transparent mb-4">
                Simulation 
            </h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed">
                Configure and execute stochastic simulations using calibrated parameters. 
                Choose the number of periods to model your scenarios with precision.
            </p>
        </div>

        <!-- Main Simulation Form Card -->
        <form method="POST" action="{% url 'results' %}">
            {% csrf_token %}
            <div class="simulation-card rounded-2xl p-8 mb-8">
                <div class="mb-8">
                    <div class="flex items-center mb-4">
                         <svg class="w-6 h-6 text-[#cb8700] mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                        <h2 class="text-2xl font-semibold text-gray-800">Simulation Parameters</h2>
                    </div>
                    <p class="text-gray-600 mb-6">Understanding simulation periods and time equivalence</p>
                </div>
<!-- Time Equivalence Guide -->
                <div class="glass-card rounded-xl p-6 mb-8">
                    <h3 class="text-lg font-semibold text-[#0b0b0b] mb-4">Time Equivalence Guide</h3>
                    <div class="space-y-3 text-gray-600">
                        <div class="flex items-center">
                            <span class="w-2 h-2 bg-black rounded-full mr-3"></span>
                            <span>Calibration baseline: <span class="font-semibold text-[#c88b05ff]">50 periods</span> <span class="font-semibold"></span></span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-2 h-2 bg-black rounded-full mr-3"></span>
                            <span>For 5-year simulation: <span class="font-semibold text-green-500">25 periods</span></span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-2 h-2 bg-black rounded-full mr-3"></span>
                            <span>For 20-year simulation: <span class="font-semibold text-[#cb8700]">100 periods</span></span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-2 h-2 bg-black rounded-full mr-3"></span>
                            <span>Maximum allowed: <span class="font-semibold text-blue-500">1000 periods</span></span>
                        </div>
                    </div>
                </div>

                <!-- Recommendation Box -->
                <div class="backdrop-blur-2xl rounded-xl p-6 mb-8 bg-amber-50 border border-amber-100">
                    <div class="flex items-start">   
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                              fill="none" stroke="currentColor" stroke-width="2"
                              class="w-7 h-6 mr-3 text-[#cb8700]">
                            <path d="M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20z"/>
                            <path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12z"/>
                            <path d="M12 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill="currentColor"/>
                        </svg>

                        <div>
                            <h4 class="font-semibold text-[#0b0b0b] mb-2">Recommendation:</h4>
                            <p class="text-gray-500 leading-relaxed">
                            Always align number of simulation periods with the time frame represented in your budget data. 
                            For instance, if your budget data represent the average annual expenditure of 10 years, this is equivalent to 50 simulation periods, hence each year corresponds to 5 periods. Accordingly, if you intend to simulate 5 years, you should input 25 periods. 
                              
                            </p>
                        </div>
                    </div>
                </div>

                 <!-- Configure Simulation Section -->
                <div class="mb-6">
                    <div class="flex items-center mb-4">
              <svg
                  class="w-7 h-8 shrink-0 text-[#cb8700]"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                >
                  <!-- outlined triangle -->
                  <path d="M5 5v14l8-7-8-7z" 
                        fill="none" 
                        stroke="currentColor" 
                        stroke-width="2"/>
              
                </svg>
                    <h3 class="text-xl font-semibold text-[#0b0b0b]">Configure Simulation</h3>
                    </div>
                    <p class="text-gray-600 mb-6">Set the number of simulation periods to execute</p>
                </div>

                <!-- Input Section -->
                <div class="space-y-6">
                    <div>
                         <label class="block text-xl font-medium text-[#0b0b0b] mb-3">Number of Simulation Periods</label>
                        <div class="rounded-xl p-1 text-center bg-white backdrop-blur-xl border border-[#e4c891]">
                            <input type="number" name="num_simulations" value="50" min="5" max="1000" required 
                                   class="w-full text-4xl font-bold text-center bg-transparent outline-none input-glow rounded-lg py-2 text-gray-800"
                                   oninput="updateEquivalent(this.value)">
                        </div>
                        <p id="time-equivalent" class="text-sm text-gray-500 text-center mt-2">Equivalent to 10.0 years of simulation time</p>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" id="start-btn"   class="w-full bg-[#cb8700] text-[#f2f2f2] font-medium py-2 px-6 rounded-[7px] tracking-wide ">
                        <div id="btn-content" class="flex items-center justify-center">
                           <svg class="w-7 h-7 shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                
                              <!-- outlined triangle -->
                              <path d="M5 5v14l8-7-8-7z" 
                                    fill="none" 
                                    stroke="currentColor" 
                                    stroke-width="2"/>
                            </svg>
                            <span id="btn-text">Start Simulation</span>
                        </div>
                    </button>
                    
                    <!-- Processing State (Hidden by default) -->
                    <div id="processing-state" 
                        class="w-full  text-[#0b0b0b] font-medium py-2 px-6 rounded-[7px]  hidden">
                        
                        <!-- Spinner + Text -->
                        <div class="flex items-center justify-center mb-2">
                            <div class="animate-spin rounded-full h-5 w-5 border-2 border-t-transparent border-[#0b0b0b] mr-3"></div>
                            <span>Processing...</span>
                        </div>

                        <!-- Processing Bar -->
  
                    </div>

                      <!-- Tailwind custom animation -->
                      <style>
                      @keyframes shimmer {
                        0% { transform: translateX(-100%); }
                        100% { transform: translateX(100%); }
                      }
                      </style>

                </div>
            </div>
        </form>

        <!-- Stats Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
            <div class="stats-grid rounded-xl p-6 text-center border border-gray-200">
                <div class="text-3xl font-bold text-red-500 mb-2">50</div>
                <div class="text-gray-600 font-medium">Calibration Periods</div>
            </div>
            <div class="stats-grid rounded-xl p-6 text-center border border-gray-200">
                <div class="text-3xl font-bold text-green-500 mb-2">1000</div>
                <div class="text-gray-600 font-medium">Maximum Periods</div>
            </div>
            <div class="stats-grid rounded-xl p-6 text-center border border-gray-200">
                <div id="current-selection" class="text-3xl font-bold text-[#cb8700] mb-2">50</div>
                <div class="text-gray-600 font-medium">Current Selection</div>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'Js/simulation.js' %}"></script>

{% endblock %}