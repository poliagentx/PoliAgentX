{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="min-h-screen bg-white py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto">
    <div class="grid md:grid-cols-2 gap-8 items-start">

      <!-- Left instructions -->
      <div>
        <h1 class="text-4xl font-bold text-black mb-4">Calibration</h1>
        <p class="text-gray-700 mb-4">
          This step helps determine the quality of the simulations that will be run.
          Move the slider to set the calibration threshold and press
          “Start Calibration”.
        </p>
        
      </div>

      <!-- Right form -->
      <div>
        <form method="POST" action="{% url 'start_calibration' %}"
              class="bg-gray-100 rounded-lg p-6 shadow-md space-y-6">
          {% csrf_token %}

          <p class="text-center text-lg text-black font-medium">
            Adjust the calibration threshold
          </p>

          <!-- Slider -->
          <div class="text-center space-y-2">
            <div id="slider-value" class="text-xl font-semibold text-black">0.70</div>
            <input type="range" id="slider" name="threshold"
                   min="0.05" max="0.99" step="0.01" value="0.70"
                   class="w-full h-2 bg-black rounded appearance-none focus:outline-none">
          </div>

          <button type="submit"
                    class="w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded font-medium">
            START CALIBRATION
          </button>
        </form>
      </div>

    </div>

    <!-- NEXT button -->
    <div class="mt-6 text-right">
      <div id="next-button-container" class="hidden">
        <a href="{% url 'simulation' %}"
           class="inline-block px-6 py-2 bg-green-600 text-white font-semibold rounded hover:bg-green-700">
          NEXT →
        </a>
      </div>
      <div id="next-disabled">
        <button disabled
                class="inline-block px-6 py-2 bg-gray-400 text-white font-semibold rounded cursor-not-allowed">
          NEXT →
        </button>
      </div>
    </div>
  </div>
</div>

<!-- keep existing slider JS -->

<script src="{% static 'Js/slider..js' %}"></script>
<script>
  /* enable NEXT after successful POST (your existing logic) */
  const form = document.querySelector('form');
  const nextBtnContainer = document.getElementById('next-button-container');
  const nextDisabled = document.getElementById('next-disabled');
  form.addEventListener('submit', () => {
      form.querySelector('button[type="submit"]').disabled = true;
      /* on server redirect you can instead set session flag and show NEXT */
  });
</script>
{% endblock %}